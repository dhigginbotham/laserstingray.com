var adminController=function(e,t,o,l){var n,a,d,g,r,i,u,s,c;return n=apiServices(),s=messagingController(),r={ready:!1},i={bound:!1,tracking:[]},c={},d={saveBlog:"#saveBlogBtn",deleteBlog:"#deleteBlogBtn",debug:!0},i.saveBlog=function(e){e&&e.preventDefault();var l,n,a;return l=o(this),n=l.data(),n.formSelector&&(a=o(n.formSelector).serializeObject(),a.title.length&&a.body.length?(l.addClass("disabled"),c.saveBlog(a,function(e,o){e&&s.toggle({text:"Validation Error: "+JSON.stringify(e),delay:2e3,func:function(){l.removeClass("disabled")}}),o&&s.toggle({text:"Redirecting you to blog post",delay:2e3,func:function(){t.location.href="/blog/"+o._id}})})):s.toggle({text:"You must provide at least a title and content for your post",delay:2e3})),!1},i.deleteBlog=function(e){e&&e.preventDefault();var t,l;t=o(this),l=t.data(),l.id&&c.deleteBlog(l.id,function(e,t){return e?console.log(e):void 0})},c.saveBlog=function(e,t){return n.post("blogs",e,t)},c.deleteBlog=function(e,t){return n.delete("blogs",{id:e},t)},a=function(){i.bound||(i.bound=!0,r[d.saveBlog].length&&(r[d.saveBlog].on("click",i.saveBlog),i.tracking.push(d.saveBlog)),r[d.deleteBlog].length&&(r[d.deleteBlog].on("click",i.deleteBlog),i.tracking.push(d.deleteBlog)))},g=function(){l.events=i,l.dom=r,l.conf=d},u=function(){r.ready||(r.ready=!0,r[d.saveBlog]=o(d.saveBlog),r[d.deleteBlog]=o(d.deleteBlog),a())},o(t).ready(u),function(e){return e&&o.extend(d,e),d.debug&&g(),l}}(window,document,jQuery,{});